# 일주월별 판매 데이터 대시보드 구현 방안

## 📊 데이터 구조 분석

### 기본 정보
- **파일명**: mw_일주월별_판매_20251120090853.xlsx
- **총 데이터**: 40,714 행 (약 4만 건의 거래 레코드)
- **기간**: 2025년 11월 1일 ~ 11월 19일 (19일간)
- **매장 수**: 192개 (백화점 50개 + 직영점 20개 + 대리점 70개 + 제휴몰 10개 + 아울렛 30개 + 면세점 8개 + 기타)
- **아이템 카테고리**: 36개
- **시즌**: 9개 (21N ~ 26N, 24F, 25F, 25S)

### 데이터 구조
```
각 행 = 매장 + 제품 + 고객유형 조합별 판매 데이터

[고정 컬럼]
- 매장정보: 매장코드, 매장명
- 제품정보: ITEM, 시즌, 품번, 제품명, 소비자가
- 판매정보: 판매유형, 고객, 할인율
- 집계정보: 판매수량, 판매액, 판매택가
- 세부집계: 정상_판매수량/액/택가, 반품_판매수량/액/택가

[동적 컬럼 - 19개 날짜]
- 2025-11-01 ~ 2025-11-19
- 각 날짜별 판매 수량
```

### 매장 유형별 분류 (총 192개)

#### 1. 백화점 (~50개)
- **롯데백화점**: 본점, 잠실, 영등포, 강남, 분당, 일산, 건대, 수원, 부산, 울산, 인천, 평촌, 전주, 창원, 중동, 노원, 동탄, 김포, 청량리, 안산, 광주, 동래, 광복, 구리, 포항, 대구, 대전, 상인, 미아 등
- **현대백화점**: 판교, 울산, 신촌, 대구, 킨텍스, 충청, 천호, 중동, 미아, 울산동구 등
- **신세계백화점**: 본점, 강남, 센텀, 대구, 광주, 천안아산, 영등포, 의정부, 김해, 대전, 경기, 하남, 마산 등
- **갤러리아**: 진주, 대전, 광교, 센터시티
- **AK플라자**: 원주, 평택, 수원
- **기타**: 더현대서울, 아이파크용산, 엔터식스(안양/왕십리), 두타, 아이즈빌부평 등

#### 2. 직영점 (~20개)
성수, 명동중앙, 강남사옥, 가로수길, 충장로, 타임스퀘어영등포, 한남, 홍대, 스타필드하남, 스타필드안성, 스타필드수원, 동성로, 롯데아울렛의왕, 타임테라스동탄, 타임스트림신림 등

#### 3. 대리점 (대-위) (~70개)
부산광복, 성남신흥, 순천연향, 신제주, 익산, 안산시화, 원주, 대구성서, 스퀘어원인천, 춘천, 속초, 목포하당, 경산, 동해, 퍼스트빌리지, 거제, 안산한대, 마산합성, 제주, 구미, 포항, 서귀포, 오산, 광명, 전주중앙, 당진, 제천, 울산무거, 아산, 대전은행, 나주, 김포장기, 서산, 청주, 화성봉담, 남양주삼패, 강릉, 안산중앙, 해남, 전주송천, 안동, 통영, 충주, 여천, 안성, 정읍, 시흥, 남원, 구미인동, 인천, 홍성, 경기광주, 보령, 상주, 영주, 대구칠곡, 포천 등

#### 4. 제휴몰 (~10개)
네이버스토어, 무신사, 롯데ON, 29CM, SSG닷컴, SSF샵, GS SHOP, CJ온스타일, 카카오선물하기, MLB 쇼피파이 글로벌

#### 5. 아울렛 (상-위) (~30개)
롯데아울렛(동부산/김해/이천/파주/기흥/수완/봉무/부여/청주/진주/율하/군산 등), 신세계아울렛(여주/파주/기장/시흥 등), 현대아울렛(김포/대전/동대문/가산/대구/가든5 등), 모다아울렛(천안/대전 등)

#### 6. 면세점 (~8개)
롯데면세점(소공/무역/제주/월드), 신라면세점(용산/장충/제주), 현대면세무역

#### 7. 기타
온라인쇼핑몰(직), 온라인완주 등

### 아이템 카테고리 (36개)
BN, BQ, CP, CR, DJ, DV, HD, HS, HT, JP, KC, KP, LP, MF, MT, OP, OR, PO, PT, RN, SH, SP, SX, TR, TS, WB, WP, PD, SO, BK, BM, ET, FD, WM, WJ, WS

### 판매 유형
- 정상
- 마일리지판매
- 할인권
- 30%

---

## 🎯 대시보드 구현 방안

### 1. **일별 판매 추이 대시보드** 📈

#### 핵심 지표 카드
```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│ 총 판매액   │ 총 판매수량 │ 평균 객단가 │ 반품률      │
│ ￦XXX,XXX천 │ X,XXX개     │ ￦XXX,XXX   │ X.X%        │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

#### 일별 판매 추이 차트
- **꺾은선 그래프**: 일별 판매액 / 판매수량 추이
- **요일별 색상 구분**: 주말/평일 구분
- **이동평균선**: 7일 이동평균 표시
- **전일 대비 증감**: 각 날짜별 증감률 표시

#### 주차별 비교
```
1주차 (11/01-11/07): ￦XX,XXX천 (XX%)
2주차 (11/08-11/14): ￦XX,XXX천 (XX%)
3주차 (11/15-11/19): ￦XX,XXX천 (XX%)
```

---

### 2. **매장별 성과 대시보드** 🏬

#### 매장 필터 & 그룹핑 시스템 ⭐ (192개 매장 핵심 기능)
```
┌─────────────────────────────────────────────────────────┐
│  🔍 매장 검색: [____________________] 🔎                │
│                                                          │
│  📊 매장 유형:                                          │
│  ☑ 백화점(50)  ☑ 직영점(20)  ☑ 대리점(70)             │
│  ☑ 제휴몰(10)  ☑ 아울렛(30)  ☑ 면세점(8)              │
│                                                          │
│  🏢 백화점 브랜드:                                      │
│  ☑ 롯데(29)  ☑ 현대(10)  ☑ 신세계(13)                 │
│  ☑ 갤러리아(4)  ☑ AK(3)  ☑ 기타                       │
│                                                          │
│  📍 지역:                                               │
│  ☑ 서울  ☑ 경기  ☑ 인천  ☑ 강원  ☑ 충청               │
│  ☑ 대구/경북  ☑ 부산/경남  ☑ 광주/전라  ☑ 제주        │
│                                                          │
│  💻 온라인:                                             │
│  ☑ 제휴몰만  ☑ 오프라인만  ☑ 전체                     │
└─────────────────────────────────────────────────────────┘
```

#### 매장 유형별 성과 요약
```
┌──────────┬────────────┬──────────┬──────────┬──────┐
│ 유형     │ 총 판매액  │ 점유율   │ 매장수   │ 평균 │
├──────────┼────────────┼──────────┼──────────┼──────┤
│ 백화점   │ ￦5.8억    │ 46%      │ 50개     │ 116만│
│ 대리점   │ ￦3.2억    │ 26%      │ 70개     │ 46만 │
│ 제휴몰   │ ￦1.5억    │ 12%      │ 10개     │ 150만│
│ 직영점   │ ￦1.2억    │ 10%      │ 20개     │ 60만 │
│ 아울렛   │ ￦0.5억    │ 4%       │ 30개     │ 17만 │
│ 면세점   │ ￦0.3억    │ 2%       │ 8개      │ 38만 │
└──────────┴────────────┴──────────┴──────────┴──────┘
```

#### 매장별 판매 순위 (Top 30 + 검색)
```
[표시 옵션] Top 10 / Top 30 / Top 50 / 전체 192개

순위 | 매장명              | 유형   | 판매액      | 판매수량 | 객단가    | 점유율
1    | 온라인쇼핑몰(직)   | 직영   | ￦XXX,XXX천 | X,XXX개  | ￦XXX,XXX | X.X%
2    | 부산광복(대-위)    | 대리점 | ￦XXX,XXX천 | X,XXX개  | ￦XXX,XXX | X.X%
3    | 성수(직)           | 직영   | ￦XXX,XXX천 | X,XXX개  | ￦XXX,XXX | X.X%
...
30   | ...                | ...    | ￦XXX,XXX천 | X,XXX개  | ￦XXX,XXX | X.X%

[더 보기 / 상세 검색]
```

#### 매장 비교 차트 (최대 5개 선택)
```
선택한 매장: [온라인쇼핑몰(직)] [부산광복] [성수] [명동중앙] [현대판교]

[일별 판매 추이 - 멀티라인 차트]
- 각 매장을 다른 색상으로 표시
- 범례 클릭으로 매장 on/off
```

#### 매장 유형별 히트맵 (Top 50만 표시)
```
매장 × 날짜 히트맵
- 세로축: 매장명 (Top 50, 필터링 가능)
- 가로축: 날짜 (11/01 ~ 11/19)
- 색상 강도: 판매액
- 클릭하면 상세 정보 팝업
```

#### 백화점 브랜드별 비교
```
[롯데] vs [현대] vs [신세계] vs [갤러리아] vs [AK]

총 판매액 | 매장 수 | 평균 | 최고 매장 | 최저 매장
```

#### 지역별 성과 맵
```
[대한민국 지도 시각화]
- 지역별 판매액을 색상으로
- 클릭하면 해당 지역 매장 리스트
- 서울/경기가 가장 진한 색상일 것으로 예상
```

#### 온라인 vs 오프라인 비교
```
┌─────────────────┬─────────────────┐
│  오프라인        │  온라인         │
│  (182개)        │  (10개)         │
│  ￦XX.X억       │  ￦X.X억        │
│  XX,XXX개       │  X,XXX개        │
└─────────────────┴─────────────────┘
```

---

### 3. **제품 분석 대시보드** 👕

#### 아이템 카테고리별 분석
- **파이 차트**: 카테고리별 판매액 비중
- **바 차트**: 카테고리별 판매수량 순위 (Top 10)
- **트리맵**: 카테고리 × 시즌 조합별 판매액

#### 베스트셀러 제품 Top 20
```
순위 | 품번        | 제품명            | 카테고리 | 판매수량 | 판매액
1    | 3ABNBM146  | 캔디 미드 비니    | BN       | XXX개    | ￦XXX,XXX
...
```

#### 시즌별 분석
- **막대 그래프**: 시즌별 판매액 비교
- **신상품 vs 구상품**: 최신 시즌(25F, 25N) vs 이전 시즌 비교

#### 가격대별 분석
```
가격대       | 판매수량 | 판매액      | 평균 할인율
~50,000원   | X,XXX개  | ￦XXX,XXX천 | X.X%
50,001-100,000 | X,XXX개  | ￦XXX,XXX천 | X.X%
...
```

---

### 4. **판매 유형 분석 대시보드** 💳

#### 판매 유형별 비중
```
┌─ 정상 (XX%)        ────────────────────────┐
├─ 마일리지판매 (XX%) ───────┐               │
├─ 할인권 (XX%)      ────┐   │               │
├─ 30% (XX%)         ──┐ │   │               │
```

#### 할인율 분석
- **정상 vs 할인 판매 비율**
- **할인율별 판매액 분포**
- **매장별 할인 전략 비교**

#### 고객 유형 분석
- **고객 vs 일반 판매 비중**
- **고객 유형별 평균 객단가**
- **고객 유형별 선호 카테고리**

---

### 5. **반품 분석 대시보드** 🔄

#### 반품률 지표
```
┌─────────────┬─────────────┬─────────────┐
│ 전체 반품률 │ 반품 건수   │ 반품 금액   │
│ X.X%        │ XXX건       │ ￦XXX,XXX천 │
└─────────────┴─────────────┴─────────────┘
```

#### 반품 상위 제품
- **반품률 높은 제품 Top 10**
- **반품액 큰 제품 Top 10**

#### 매장별/카테고리별 반품률
- **히트맵**: 매장 × 카테고리 반품률
- **문제 영역 식별**

---

### 6. **통합 인사이트 대시보드** 💡

#### 실시간 요약
```
📊 오늘의 판매 (11/19)
- 판매액: ￦XX,XXX천 (전일대비 ±XX%)
- 판매수량: XXX개 (전일대비 ±XX%)
- 최다 판매 매장: XXX점 (￦XX,XXX천)
- 베스트 아이템: XXX (XX개)
```

#### 주요 발견사항
- **판매 트렌드**: 증가/감소 추세
- **주목할 제품**: 급상승 제품
- **주의 필요 매장**: 부진 매장
- **시즌 전환**: 시즌별 판매 변화

#### 예측 및 권장사항
- **남은 11월 판매 예측**
- **재고 관리 권장사항**
- **프로모션 제안**

---

## 🛠 기술 구현 방안

### 1. 데이터 읽기 라이브러리 (lib/weeklyMonthlySalesReader.ts)

```typescript
export interface WeeklySalesData {
  // 기본 정보
  storeCode: string;
  storeName: string;
  storeType: 'department' | 'direct' | 'dealer' | 'outlet' | 'dutyfree' | 'online' | 'other'; // 추가
  storeBrand?: string; // '롯데', '현대', '신세계', '갤러리아', 'AK' 등
  storeRegion?: string; // '서울', '경기', '인천', '부산', '대구' 등
  item: string;
  season: string;
  productCode: string;
  productName: string;
  retailPrice: number;
  
  // 판매 정보
  salesType: string;
  customerType: string;
  discountRate: string;
  
  // 집계 정보
  totalQuantity: number;
  totalSales: number;
  totalTagPrice: number;
  
  normalQuantity: number;
  normalSales: number;
  normalTagPrice: number;
  
  returnQuantity: number;
  returnSales: number;
  returnTagPrice: number;
  
  // 일별 판매 (동적)
  dailySales: {
    [date: string]: number; // 'YYYY-MM-DD': quantity
  };
}

export interface StoreInfo {
  code: string;
  name: string;
  type: 'department' | 'direct' | 'dealer' | 'outlet' | 'dutyfree' | 'online' | 'other';
  brand?: string; // 백화점인 경우
  region?: string;
  isOnline: boolean;
}

export interface WeeklySalesAnalytics {
  // 전체 통계
  totalSales: number;
  totalQuantity: number;
  averagePrice: number;
  returnRate: number;
  
  // 일별 집계
  dailyTotals: {
    date: string;
    sales: number;
    quantity: number;
    transactions: number;
  }[];
  
  // 매장별 집계 (192개)
  storeStats: {
    storeCode: string;
    storeName: string;
    storeType: string;
    storeBrand?: string;
    storeRegion?: string;
    sales: number;
    quantity: number;
    share: number;
    rank: number;
  }[];
  
  // 매장 유형별 집계
  storeTypeStats: {
    type: string;
    storeCount: number;
    sales: number;
    quantity: number;
    share: number;
    averagePerStore: number;
  }[];
  
  // 백화점 브랜드별 집계
  departmentBrandStats: {
    brand: string;
    storeCount: number;
    sales: number;
    quantity: number;
    share: number;
  }[];
  
  // 지역별 집계
  regionStats: {
    region: string;
    storeCount: number;
    sales: number;
    quantity: number;
    share: number;
  }[];
  
  // 온라인 vs 오프라인
  onlineOfflineStats: {
    online: {
      storeCount: number;
      sales: number;
      quantity: number;
      share: number;
    };
    offline: {
      storeCount: number;
      sales: number;
      quantity: number;
      share: number;
    };
  };
  
  // 카테고리별 집계
  itemStats: {
    item: string;
    sales: number;
    quantity: number;
    share: number;
  }[];
  
  // 시즌별 집계
  seasonStats: {
    season: string;
    sales: number;
    quantity: number;
  }[];
  
  // 베스트셀러
  bestSellers: {
    productCode: string;
    productName: string;
    item: string;
    quantity: number;
    sales: number;
  }[];
}
```

### 2. API 엔드포인트 (app/api/weekly-sales/route.ts)

```typescript
import { NextResponse } from 'next/server';
import { readWeeklySales, analyzeWeeklySales } from '@/lib/weeklyMonthlySalesReader';

export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url);
    const view = searchParams.get('view'); // 'raw', 'analytics', 'daily', 'store', 'item'
    
    const rawData = await readWeeklySales();
    
    switch (view) {
      case 'raw':
        return NextResponse.json(rawData);
      
      case 'analytics':
        const analytics = analyzeWeeklySales(rawData);
        return NextResponse.json(analytics);
      
      case 'daily':
        // 일별 집계만 반환
        // ...
      
      case 'store':
        // 매장별 데이터만 반환
        // ...
      
      // ... 더 많은 뷰
      
      default:
        return NextResponse.json(analyzeWeeklySales(rawData));
    }
  } catch (error) {
    return NextResponse.json({ error: '데이터 읽기 실패' }, { status: 500 });
  }
}
```

### 3. 컴포넌트 구조

```
components/
├── WeeklySales/
│   ├── DailySalesTrend.tsx              # 일별 판매 추이 차트
│   ├── StoreFilter.tsx                  # ⭐ 매장 필터 & 검색 (192개 핵심)
│   ├── StoreTypeSelector.tsx            # ⭐ 매장 유형 선택기
│   ├── StoreComparison.tsx              # ⭐ 매장 비교 (최대 5개)
│   ├── StorePerformanceTable.tsx        # 매장별 성과 테이블 (정렬/페이징)
│   ├── StoreTypeOverview.tsx            # 매장 유형별 요약
│   ├── StoreHeatmap.tsx                 # 매장×날짜 히트맵 (Top 50)
│   ├── DepartmentBrandComparison.tsx    # ⭐ 백화점 브랜드 비교
│   ├── RegionMap.tsx                    # ⭐ 지역별 성과 맵
│   ├── OnlineOfflineComparison.tsx      # ⭐ 온라인 vs 오프라인
│   ├── ItemAnalysis.tsx                 # 아이템 분석
│   ├── SeasonComparison.tsx             # 시즌 비교
│   ├── SalesTypeBreakdown.tsx           # 판매유형 분석
│   ├── ReturnAnalysis.tsx               # 반품 분석
│   ├── BestSellers.tsx                  # 베스트셀러 테이블
│   ├── WeeklySummary.tsx                # 주차별 요약
│   └── WeeklySalesDashboard.tsx         # 통합 대시보드
```

### 4. 유틸리티 함수 (lib/storeUtils.ts)

```typescript
// 매장 유형 판별
export function getStoreType(storeName: string): StoreInfo['type'] {
  if (storeName.includes('(직)')) return 'direct';
  if (storeName.includes('(대-위)')) return 'dealer';
  if (storeName.includes('(제휴몰)')) return 'online';
  if (storeName.includes('(상-위)') || storeName.includes('아울렛')) return 'outlet';
  if (storeName.includes('면세')) return 'dutyfree';
  if (storeName.includes('롯데') || storeName.includes('현대') || 
      storeName.includes('신세계') || storeName.includes('갤러리아') || 
      storeName.includes('AK')) return 'department';
  return 'other';
}

// 백화점 브랜드 추출
export function getDepartmentBrand(storeName: string): string | undefined {
  if (storeName.includes('롯데')) return '롯데';
  if (storeName.includes('현대')) return '현대';
  if (storeName.includes('신세계')) return '신세계';
  if (storeName.includes('갤러리아')) return '갤러리아';
  if (storeName.includes('AK')) return 'AK';
  return undefined;
}

// 지역 추출 (매장명 기반)
export function getStoreRegion(storeName: string): string {
  // 서울
  if (storeName.includes('강남') || storeName.includes('본점') || 
      storeName.includes('명동') || storeName.includes('잠실') ||
      storeName.includes('영등포') || storeName.includes('성수') ||
      storeName.includes('홍대') || storeName.includes('가로수길') ||
      storeName.includes('한남') || storeName.includes('청량리') ||
      storeName.includes('노원') || storeName.includes('신촌') ||
      storeName.includes('천호') || storeName.includes('미아') ||
      storeName.includes('동대문') || storeName.includes('왕십리')) return '서울';
  
  // 경기
  if (storeName.includes('판교') || storeName.includes('분당') ||
      storeName.includes('일산') || storeName.includes('평촌') ||
      storeName.includes('수원') || storeName.includes('안양') ||
      storeName.includes('성남') || storeName.includes('용인') ||
      storeName.includes('하남') || storeName.includes('고양') ||
      storeName.includes('동탄') || storeName.includes('광교') ||
      storeName.includes('킨텍스') || storeName.includes('중동')) return '경기';
  
  // 인천
  if (storeName.includes('인천')) return '인천';
  
  // 부산/경남
  if (storeName.includes('부산') || storeName.includes('울산') ||
      storeName.includes('창원') || storeName.includes('김해') ||
      storeName.includes('마산') || storeName.includes('진주') ||
      storeName.includes('거제') || storeName.includes('통영')) return '부산/경남';
  
  // 대구/경북
  if (storeName.includes('대구') || storeName.includes('경산') ||
      storeName.includes('포항') || storeName.includes('구미') ||
      storeName.includes('안동') || storeName.includes('경주')) return '대구/경북';
  
  // 광주/전라
  if (storeName.includes('광주') || storeName.includes('전주') ||
      storeName.includes('순천') || storeName.includes('목포') ||
      storeName.includes('여수') || storeName.includes('익산')) return '광주/전라';
  
  // 대전/충청
  if (storeName.includes('대전') || storeName.includes('청주') ||
      storeName.includes('천안') || storeName.includes('충청') ||
      storeName.includes('세종') || storeName.includes('아산')) return '대전/충청';
  
  // 강원
  if (storeName.includes('춘천') || storeName.includes('강릉') ||
      storeName.includes('속초') || storeName.includes('원주')) return '강원';
  
  // 제주
  if (storeName.includes('제주')) return '제주';
  
  return '기타';
}

// 온라인 여부
export function isOnlineStore(storeName: string): boolean {
  return storeName.includes('(제휴몰)') || 
         storeName.includes('온라인') ||
         storeName.includes('쇼피파이');
}
```

### 5. 차트 & UI 라이브러리
- **Recharts**: 기본 차트 (라인, 바, 파이)
- **Nivo**: 고급 시각화 (히트맵, 트리맵)
- **React-Table / TanStack Table**: 192개 매장 데이터 테이블 (정렬, 필터, 페이징)
- **React-Select**: 매장 선택 드롭다운
- **Fuse.js**: 매장명 퍼지 검색 (오타 허용)
- **react-map-gl / Leaflet**: 지역별 지도 시각화 (선택사항)

---

## 📱 대시보드 레이아웃 제안

### 메인 페이지 (app/weekly-sales/page.tsx)

```
┌─────────────────────────────────────────────────────┐
│  🏷️ 일주월별 판매 대시보드                         │
│  기간: 2025.11.01 - 2025.11.19                      │
├─────────────────────────────────────────────────────┤
│                                                      │
│  [탭] 전체 현황 | 일별 추이 | 매장 분석 |          │
│       제품 분석 | 판매유형 | 반품 분석             │
│                                                      │
├──────┬──────┬──────┬──────────────────────────────┤
│ 총판매액│판매수량│평균객단가│     반품률           │
│ 12.5억│15,234개│82,000원│     2.3%              │
└──────┴──────┴──────┴──────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│  📈 일별 판매 추이                                  │
│  [꺾은선 그래프 - 19일 데이터]                      │
│                                                      │
└─────────────────────────────────────────────────────┘

┌────────────────────────┬────────────────────────────┐
│  🏬 매장별 판매 순위    │  👕 카테고리별 판매        │
│  [바 차트]              │  [파이 차트]               │
│                         │                            │
└────────────────────────┴────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│  🔥 베스트셀러 Top 20                               │
│  [데이터 테이블 - 정렬/필터 가능]                  │
└─────────────────────────────────────────────────────┘
```

---

## 🎨 고급 기능 제안

### 1. 필터링 기능
- **날짜 범위 선택**: 특정 기간만 분석
- **매장 선택**: 특정 매장만 포커스
- **카테고리 선택**: 특정 아이템만 분석
- **시즌 필터**: 특정 시즌 상품만

### 2. 비교 기능
- **기간 비교**: 1주차 vs 2주차 vs 3주차
- **매장 비교**: 최대 4개 매장 동시 비교
- **전년 동월 비교** (데이터 있을 경우)

### 3. 인터랙티브 기능
- **드릴다운**: 차트 클릭 시 상세 보기
- **크로스 필터**: 한 차트에서 선택 시 다른 차트 자동 필터
- **툴팁**: 상세 정보 호버 표시

### 4. 내보내기
- **PDF 리포트**: 현재 보기를 PDF로
- **Excel 내보내기**: 집계 데이터 다운로드
- **이미지 저장**: 차트를 이미지로

### 5. 알림/인사이트
- **목표 대비 진행률**: 월 목표 설정 시
- **이상치 감지**: 평소와 다른 패턴 알림
- **추천 액션**: AI 기반 권장사항

---

## 🚀 구현 우선순위 (192개 매장 버전)

### Phase 1: 데이터 처리 & 기본 대시보드 (2-3일)
1. ✅ 데이터 읽기 라이브러리 구현
   - 매장 유형/브랜드/지역 자동 분류
   - 192개 매장 메타데이터 생성
2. ✅ API 엔드포인트 생성
   - 필터링 쿼리 파라미터 지원
   - 페이징 지원
3. ✅ 핵심 지표 카드
4. ✅ 일별 판매 추이 차트
5. ✅ 매장 유형별 요약

### Phase 2: 매장 필터링 & 검색 (2-3일) ⭐ 핵심
1. ✅ 매장 검색 시스템 (Fuse.js)
   - 매장명 자동완성
   - 오타 허용 퍼지 검색
2. ✅ 매장 유형 필터
   - 백화점/직영점/대리점/제휴몰/아울렛/면세점
3. ✅ 백화점 브랜드 필터 (롯데/현대/신세계/갤러리아/AK)
4. ✅ 지역 필터 (9개 권역)
5. ✅ 온라인/오프라인 토글
6. ✅ 매장별 성과 테이블 (TanStack Table)
   - 정렬 기능
   - 페이징 (10/30/50/100개씩)
   - CSV 내보내기

### Phase 3: 매장 비교 & 시각화 (2-3일)
1. ✅ 매장 비교 기능 (최대 5개)
   - 일별 추이 비교
   - 성과 지표 비교
2. ✅ 매장 유형별 비교 차트
3. ✅ 백화점 브랜드 비교
4. ✅ 히트맵 시각화 (Top 50)
5. ✅ 지역별 지도 시각화 (선택사항)
6. ✅ 온라인 vs 오프라인 비교

### Phase 4: 제품 & 고급 분석 (2-3일)
1. ✅ 제품 분석 (베스트셀러, 카테고리)
2. ✅ 시즌 분석
3. ✅ 판매 유형 분석
4. ✅ 반품 분석
5. ✅ 주차별 비교

### Phase 5: 최적화 & 완성 (1-2일)
1. ✅ 성능 최적화 (192개 매장 데이터 메모이제이션)
2. ✅ 내보내기 기능 (PDF, Excel)
3. ✅ 반응형 디자인
4. ✅ 로딩 스켈레톤
5. ✅ 에러 핸들링

**총 예상 기간: 9-14일**

---

## 💡 핵심 인사이트 예시 (192개 매장)

이 대시보드를 통해 답할 수 있는 질문들:

### 1. **일별 성과**
   - "어제 판매가 저조했던 이유는?"
   - "주말 vs 평일 판매 차이는?"
   - "특정 날짜에 판매가 급증한 이유는?"

### 2. **매장 성과 (192개 분석)** ⭐
   - "가장 잘 팔리는 매장 Top 10은?"
   - "롯데백화점 vs 현대백화점 vs 신세계, 어디가 더 잘하나?"
   - "직영점이 대리점보다 성과가 좋은가?"
   - "온라인 판매 vs 오프라인 판매 비중은?"
   - "부진한 매장 Bottom 10은 어디?"
   - "서울/경기 vs 지방, 판매 차이는?"
   - "제휴몰 중 어느 플랫폼이 가장 효과적인가?"
   - "아울렛 매장의 수익성은?"
   - "면세점 판매 트렌드는?"
   - "특정 지역에 매장을 더 내야 하나?"

### 3. **제품 인사이트**
   - "어떤 제품이 가장 인기있나?"
   - "시즌 전환이 제대로 되고 있나? (25F vs 24F)"
   - "어떤 가격대가 잘 팔리나?"
   - "36개 아이템 카테고리 중 어느 것이 강세?"
   - "어느 매장 유형에서 어떤 제품이 잘 팔리나?"

### 4. **판매 전략**
   - "할인 판매가 효과적인가?"
   - "마일리지 판매 비중은?"
   - "고객 vs 일반 판매 패턴은?"
   - "백화점별로 할인 전략이 다른가?"

### 5. **문제 식별 & 기회 발견**
   - "반품률이 높은 제품/매장은?"
   - "재고 조정이 필요한 제품은?"
   - "성장 가능성이 높은 매장은?"
   - "철수를 고려해야 할 매장은?"
   - "온라인 확장 기회는?"
   - "신규 입점 추천 백화점은?"

### 6. **채널 전략**
   - "백화점 vs 직영점 vs 대리점, 어디에 집중해야 하나?"
   - "온라인 제휴몰을 더 확대해야 하나?"
   - "아울렛 매장의 가치는?"
   - "지역별 매장 포트폴리오 최적화 방안은?"

---

## ⚠️ 192개 매장 데이터 처리 시 주의사항

### 1. 성능 최적화
- **가상 스크롤링**: 192개 매장 테이블은 react-window나 react-virtualized 사용
- **메모이제이션**: useMemo, useCallback로 불필요한 재계산 방지
- **지연 로딩**: 차트/테이블 lazy loading
- **API 페이징**: 한번에 모든 데이터 불러오지 말고 필요한 만큼만
- **클라이언트 캐싱**: React Query나 SWR로 데이터 캐싱

### 2. UX 개선
- **기본 뷰는 Top 30**: 전체 192개는 "더 보기" 클릭 시
- **즉각적인 피드백**: 필터 적용 시 로딩 스피너
- **스켈레톤 UI**: 데이터 로드 중 스켈레톤 표시
- **검색 자동완성**: 매장명 입력 시 즉시 추천
- **즐겨찾기 기능**: 자주 보는 매장을 저장

### 3. 데이터 구조
- **인덱싱**: 매장 코드로 빠른 조회
- **그룹 집계 미리 계산**: 매장 유형별/지역별 집계는 서버에서
- **매장 메타데이터 분리**: 매장 정보는 별도 파일/DB에 저장

### 4. 필터링 전략
- **AND 조건**: 여러 필터 동시 적용
- **필터 초기화**: 한번에 모든 필터 리셋
- **필터 상태 URL 저장**: 북마크/공유 가능
- **필터 프리셋**: "롯데백화점만", "서울 직영점만" 등 저장

### 5. 모바일 대응
- **반응형 테이블**: 모바일에서는 카드 형태로
- **필터 UI**: 모바일에서는 바텀시트나 모달
- **차트 간소화**: 작은 화면에서는 핵심 데이터만

---

## 📊 추가 제안: 매장 세그먼테이션

192개 매장을 효과적으로 관리하려면 세그먼트 분류가 필요합니다:

### A그룹 (High Performers) - Top 20%
- 매출 상위 20% (약 38개 매장)
- 집중 관리 대상
- 베스트 프랙티스 분석

### B그룹 (Mid Performers) - 60%
- 중간 60% (약 115개 매장)
- 성장 가능성 분석
- A그룹 벤치마킹

### C그룹 (Low Performers) - Bottom 20%
- 하위 20% (약 39개 매장)
- 개선 방안 마련
- 철수 검토 대상

### 신규/특수 매장
- 새로 입점한 매장
- 면세점, 아울렛 등 특수 채널
- 별도 KPI 적용

---

## 🎯 구현 시작하기

바로 구현을 시작하시겠습니까? 다음 단계로 진행하겠습니다:

1. **`lib/storeUtils.ts`** - 매장 분류 유틸리티 (192개 매장 메타데이터)
2. **`lib/weeklyMonthlySalesReader.ts`** - 데이터 읽기 라이브러리
3. **`app/api/weekly-sales/route.ts`** - API 엔드포인트 (필터링 지원)
4. **`components/WeeklySales/StoreFilter.tsx`** - 매장 필터/검색 컴포넌트
5. **`components/WeeklySales/WeeklySalesDashboard.tsx`** - 메인 대시보드
6. **`app/weekly-sales/page.tsx`** - 페이지

구현을 원하시면 말씀해주세요! 🚀

